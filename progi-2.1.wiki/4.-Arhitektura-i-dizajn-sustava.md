# Arhitektura sustava

Cilj ovog poglavlja je pružiti jasan, sažet i strukturiran pregled arhitekture Vašeg programskog sustava u razvoju, uz razrađivanje ključnih komponenata i njihovih međusobnih odnosa. Ova dokumentacija treba omogućiti svim sudionicima projekta potpuno razumijevanje arhitekture sustava, načina implementacije, podjele odgovornosti te kako sustav funkcionira kao cjelina. Uključivanje odgovarajućih dijagrama pomaže u kvalitetnom dokumentiranju i vizualizaciji strukture sustava i njegovih ključnih komponenti.

## Opis arhitekture
Ovdje opišite pregled arhitekture na visokoj razini, uključujući stil arhitekture sustava. Detaljno opisujte:

•	Stil arhitekture: Objasnite koji arhitektonski stil (npr. mikrousluge, monolit, klijent-poslužitelj, uslužno orijentirani sustav) ste odabrali za vaš sustav i zašto je taj stil najprikladniji za potrebe vašeg projekta. Uključite razloge temeljene na principima oblikovanja arhitekture koje ste učili na predavanjima.

•	Podsustavi: Identificirajte glavne podsustave unutar sustava i objasnite njihove odgovornosti.
•	Preslikavanje na radnu platformu: Objasnite kako će arhitektura biti implementirana na konkretnoj radnoj platformi (npr. cloud, lokalni serveri, hibridni pristup) i zašto je ta platforma odabrana.

•	Spremišta podataka: Opišite način pohrane podataka (npr. relacijska baza podataka, NoSQL baza podataka, datotečni sustav) i odaberite tehnologiju prema potrebama sustava.

•	Mrežni protokoli: Navodite koji mrežni protokoli (npr. HTTP, WebSocket, gRPC) će se koristiti za komunikaciju između sustava ili komponenata.
•	Globalni upravljački tok: Objasnite kako podaci i informacije cirkuliraju kroz sustav, od početne interakcije korisnika do završne obrade i povratne informacije.

•	Sklopovskoprogramski zahtjevi: Opišite potrebne tehničke zahtjeve vezane uz sklopovlje i program, uključujući podršku za specifične operativne sustave, procesore, memoriju i druge komponente.

## Obrazloženje odabira arhitekture
U ovom dijelu trebate objasniti razloge za odabir arhitekture opisane u prethodnom poglavlju. Objasnite ključne čimbenike koji su utjecali na vaš izbor arhitekture, uključujući izazove i kompromise koje ste razmatrali tijekom odlučivanja. Pojasnite kako odabrana arhitektura zadovoljava zahtjeve vašeg projekta i omogućava skalabilnost, održivost i modularnost.

•	Izbor arhitekture temeljen na principima oblikovanja: Objavite koji su specifični principi oblikovanja arhitekture korišteni prilikom odabira (npr. visoka kohezija, niska povezanost, fleksibilnost, sigurnost). Objasnite kako ti principi pomažu u ostvarivanju ciljeva vašeg projekta.

•	Razmatrane alternative: Ako ste razmatrali druge arhitekture, ukratko ih opišite i objasnite zašto ste ih odbacili u korist trenutnog odabira.
Napomena: Obrazloženje ne mora biti duboko tehničko, ali treba pokazati jasno razumijevanje kako arhitektura podržava potrebe vašeg projekta.

## Organizacija sustava na visokoj razini
Opišite organizaciju sustava na najvišoj razini apstrakcije. Uključite sljedeće komponente:

•	Klijent-poslužitelj: Objasnite kako je sustav organiziran u klijent-poslužitelj arhitekturi, ako je primjenjivo.

•	Baza podataka: Opis baze podataka i njezinu ulogu u sustavu (npr. relacijska ili NoSQL baza podataka).

•	Datotečni sustav: Ako sustav koristi datotečni sustav za pohranu podataka, objasnite njegovu ulogu i način integracije.

•	Grafičko sučelje: Opis korisničkog sučelja (npr. web aplikacija, desktop aplikacija) i načina na koji je povezano s ostalim komponentama sustava.

## Organizacija aplikacije
Opišite organizaciju aplikacije na složenijoj razini, uključujući strukturu slojeva i komponenata aplikacije:

•	Frontend i Backend slojevi: Opišite kako su frontend i backend slojevi organizirani u aplikaciji. Objasnite odgovornosti svakog sloja i njihovu interakciju.

•	MVC arhitektura: Ako koristite MVC (Model-View-Controller) arhitekturu, objasnite kako je implementirana i kako omogućuje odvajanje logike korisničkog sučelja, poslovne logike i podataka.

> 
>U prethodna poglavlja uključite odgovarajuće skice i dijagrame kako biste ilustrirali strukturu sustava i međusobne odnose komponenata.
>
>•	Dijagram visoke razine: Prikaz glavnih podsustava, njihovih uloga i međusobnih odnosa. Napomena: Ovi dijagrami mogu biti inicijalni i skicirani. >
>U kasnijim fazama projekta bit će detaljnije razrađeni.
>
>•	Napomena: Primjetite da ćete u drugom ciklusu razraditi dijagram komponenti: Detaljniji prikaz unutarnje strukture sustava (npr. kako se frontend i backend dijele, kako interagiraju s bazom podataka) i dr.
>
>  **Reference**: Citirajte prednosti odabrane arhitekture i u popisu litrature navedite referecu npr. Architect modern web applications with ASP.NET core and azure - .NET, Architect modern web applications with ASP.NET Core and Azure - .NET | Microsoft Learn. Dostupno: https://learn.microsoft.com/en-us/dotnet/architecture/modern-web-apps-azure/ (7. studeni 2024.).


> Izvadak primjera
>
>Sustav je dizajniran prema arhitekturi mikrousluga (engl.microservices), što znači da je funkcionalnost podijeljena u neovisne, ali međusobno povezane komponente (mikrousluge) koje zajednički obavljaju specifične zadatke unutar sustava. Svaka mikrousluga upravlja svojim vlastitim segmentom poslovne logike i podatkovnim potrebama, omogućujući lakšu skalabilnost, održavanje i razvoj.
>
>Ključne komponente

>Sustav se sastoji od nekoliko glavnih mikrousluga:

>
>Usluga autentifikacije i autorizacije: Upravlja prijavom korisnika, autentifikacijom i autorizacijom te koristi JSON Web Token (JWT) za provjeru korisničkih zahtjeva.

>	Usluga upravljanja korisnicima: Upravlja kreiranjem, ažuriranjem i brisanjem korisničkih profila te čuva osnovne podatke o korisnicima.
>
>	Usluga za upravljanje sadržajem: Omogućuje korisnicima dodavanje, uređivanje i brisanje sadržaja unutar aplikacije.
>
>	Usluga notifikacija: Zadužena je za slanje obavijesti korisnicima putem e-pošte ili drugih kanala (koristi servise poput Firebase Cloud Messaging).
>
>	Usluga pretraživanja i filtriranja: Omogućuje pretragu i filtriranje podataka, koristeći Elasticsearch za brze pretrage velikih količina podataka.
>	Dijagram arhitekture: Dijagram prikazuje sve glavne mikrousluge u sustavu, njihovu međusobnu povezanost i komunikaciju s vanjskim servisima te bazom podataka.
>
>	API Gateway: Služi kao ulazna točka u sustav, prima zahtjeve od korisnika i prosljeđuje ih relevantnim mikrouslugama. Također osigurava autentifikaciju, autorizaciju i kontrolu pristupa.
>
>	Komunikacija među mikrouslugama: Komunikacija među mikrouslugama odvija se putem asinkronih poruka u Message Brokeru (npr. RabbitMQ ili Kafka) ili putem REST API poziva, ovisno o potrebama. Na taj način se osigurava visok stupanj izolacije i otpornosti na greške.
>
>	Baza podataka: Svaka mikrousluga ima vlastitu bazu podataka, omogućujući izolaciju podataka i neovisno upravljanje. Na primjer, usluga korisnika koristi relacijsku bazu podataka (npr. PostgreSQL), dok usluga pretraživanja koristi dokumentnu bazu (npr. MongoDB).
>
>	Vanjski servisi: Povezivanje s vanjskim servisima, kao što su pružatelji identifikacijskih usluga (OAuth) i servisi za slanje notifikacija (Twilio za SMS, Firebase za push notifikacije), omogućuje lakšu integraciju s vanjskim ekosustavom.
>
>Prednosti arhitekture mikrousluga
>
>Ova arhitektura omogućuje:
>
>	Skalabilnost: Svaka mikrousluga može se skalirati neovisno, čime se optimiziraju resursi ovisno o specifičnim zahtjevima (horizontalna ili vertikalna skalabilnost).
>
>	Otpornost na greške: Zbog izolacije mikrousluga, pogreška u jednoj komponenti ne utječe na cijeli sustav.
>
>	Fleksibilnost u razvoju i implementaciji: Različiti timovi mogu raditi na različitim uslugama paralelno, koristeći optimalne tehnologije za svaki segment.
>
>Referenca Ovaj pristup je u skladu s principima mikrouslužne arhitekture kako ih definiraju Fowler i Lewis (2014) te s industrijskim praksama navedenim u "Building Microservices" (Newman, 2015), čiji su primjeri korišteni za detaljnije definiranje uloga i komunikacije među mikrouslugama.
>


# Baza podataka

Potrebno je opisati koju vrstu i implementaciju baze podataka ste odabrali, glavne
komponente od kojih se sastoji i slično.

## Opis tablica
Svaku tablicu je potrebno opisati po zadanom predlošku. Lijevo se nalazi točno ime varijable
u bazi podataka, u sredini se nalazi tip podataka, a desno se nalazi opis varijable.
Označite primarni ključ i strani ključ.

### Ime tablice
| Atribut         | Tip podatka          | Opis varijable |
| :-------------  |:---------------------|:-----          |
| IDKorisnik      | INT                  | Jedinstveni identifikator |
|                 |                      |                |
|                 |                      |                |

## Dijagram baze podataka

U ovom potpoglavlju potrebno je umetnuti dijagram baze podataka. Primarni i strani
ključevi moraju biti označeni, a tablice povezane. Bazu podataka je potrebno normalizirati.
Podsjetite se kolegija ”Baze podataka”.

# Dijagram razreda

Potrebno je priložiti dijagram razreda s pripadajućim opisom. Zbog preglednosti je
moguće dijagram razlomiti na više njih, ali moraju biti grupirani prema sličnim razinama
apstrakcije i srodnim funkcionalnostima.
> UML dijagram razreda obavezno uključuje modelirani dijagram razreda!!

_dio 1. revizije_

Prilikom prve predaje projekta, potrebno je priloˇziti potpuno razraden dijagram razreda
vezan uz generičku funkcionalnost sustava. Ostale funkcionalnosti trebaju biti
idejno razrađene u dijagramu sa sljedećim komponentama: nazivi razreda, nazivi metoda
i vrste pristupa metodama (npr. javni, zaštićeni), nazivi atributa razreda, veze i
odnosi između razreda.


Napomena: Prilikom druge predaje projekta dijagram razreda i opisi moraju odgovarati stvarnom
stanju implementacije

# Dinamičko ponašanje aplikacije

Dinamičko ponašanje aplikacije odnosi se na način na koji objekti u
sustavu evoluiraju kroz vrijeme, uključujući prijelaze između različitih
stanja. To uključuje aktivnosti, događaje, odluke i interakcije unutar
aplikacije. UML dijagrami stanja omogućuju vizualizaciju tih promjena i
olakšavaju razumijevanje dinamike sustava.

Razumijevanje promjena stanja neophodno je za pravilno funkcioniranje
aplikacije jer pruža uvid u interakcije među objektima, komponentama i
korisnicima tijekom rada sustava. Korištenjem UML dijagrama stanja i
aktivnosti moguće je vizualizirati prijelaze i stanja objekata,
identificirati potencijalne probleme, osigurati točnu implementaciju te
poboljšati komunikaciju među članovima tima.

**Zadatak:**

- Dokumentirajte dva dinamička dijagrama koji prikazuju značajne ili
  neke složene procese u aplikaciji. Registracija i prijava korisnika
  nisu ključni procesi u ovom kontekstu, stoga se usmjerite na
  specifične, značajne procese.

## UML dijagrami stanja

UML dijagrami stanja nužni su za razumijevanje dinamičkog ponašanja
sustava. Oni jasno prikazuju promjene stanja objekata tijekom vremena
ovisno o događajima i uvjetima.

**Preporuke za izradu UML dijagrama stanja:**

1.  Odaberite značajan objekt sustava (npr. prijava štete, obrada
    zahtjeva).

2.  Identificirajte stanja objekta (npr. aktivan, neaktivan, obrisan).

3.  Definirajte događaje i uvjete prijelaza.

4.  Ako je potrebno, koristite hijerarhiju stanja za složenije probleme.

5.  Dodajte bilješke za pojašnjenje važnih prijelaza i elemenata.

>> Primjer: Dijagram stanja za prijavu štete može uključivati:

>> - Stanja: *Kreirana prijava*, *Obrađena prijava*, *Zatvorena prijava*….

## UML dijagrami aktivnosti

Dijagram aktivnosti prikazuje tijek izvršavanja određenog procesa. Osim
za razumijevanje toka podataka unutar aplikacije, koristi se za analizu
poslovnih procesa.

**Zadatak:**

1.  Identificirajte proces koji želite modelirati (npr. obrada
    zahtjeva).

2.  Razlomite proces na aktivnosti i povežite ih za prikaza slijeda
    izvršavanja.

3.  Upotrijebite pseudo čvorove za jasan prikaz.

>> Primjer:** Na primjer, u aplikaciji za upravljanje štetama, dijagram aktivnosti može prikazivati proces obrade zahtjeva za pomoć, što
uključuje aktivnosti: *Primanje zahtjeva*, *Analiza podataka*, *Odobravanje resursa*, *Slanje pomoći*.




